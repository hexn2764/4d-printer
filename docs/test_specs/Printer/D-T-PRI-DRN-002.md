# Test Specification: D-T-PRI-DRN-002

**Test ID:** D-T-PRI-DRN-002

**Test Name:** Printer - Display Results No Formatting

**Source:** Developer

**Module:** Printer

**Category:** Display Results No Formatting

**Related Requirements:**

*   D-15
*   D-17
*   D-18
*   D-21

**Purpose:**
This test verifies that the `display_results` method of the `Printer` class, when called with `formatting=False`, correctly outputs the total duration, the top X entries in a basic, non-tabular format using the `do_basic_output` method, the total test case counts (total, parsed, and skipped), and the status counts for parsed cases.

**Preconditions:**

*   1) A `Printer` instance is created.
*   2) The `capsys` fixture is available to capture output.

**Test Data:**

*   `analysis`: A dictionary containing the total duration, a list of top X entries, test case counts, and status counts.
    ```python
    analysis = {
        "total_duration": 88.999,
        "top_x_entries": [
            (10, {"Requirement": "REQ-X", "Test Case": "TestCaseX", "Duration": 60.5, "Status": "Passed"}),
            (11, {"Requirement": "REQ-Y", "Test Case": "TestCaseY", "Duration": 28.4999, "Status": "Failed"})
        ],
        "test_case_counts": (50, 45, 5),  # 50 total, 45 parsed, 5 skipped
        "status_counts": {"Pass": 25, "Fail": 15, "Blocked": 5},
    }
    ```

**Test Steps:**

1.  Call the `display_results` method with the `analysis` data and `formatting=False`.
2.  Capture the output using `capsys.readouterr()`.

**Expected Results:**

*   1) The output should contain the total duration, formatted as "Total Duration: <value> seconds.".
*   2) The output should contain the total number of cases, parsed cases, and skipped cases, formatted as "Total Amount of Cases: <total> (<parsed> Parsed, <skipped> Skipped).".
*   3) The output should contain a "Status Counts" header.
*   4) The output should contain the status counts for parsed cases (Pass, Fail, Blocked, etc.).
*   5) The output should contain a "Top X (Longest Tests):" header.
*   6) The output should contain the top X entries in a basic format, as verified in the `test_do_basic_output` test.

**Assertions:**

*   `assert "\nTotal Duration: 88.999 Seconds.\n" in out`: Asserts that the total duration is printed correctly.
*   `assert "Total Amount of Cases: 50 (45 Parsed, 5 Skipped)." in out`: Asserts that the total, parsed, and skipped case counts are printed correctly.
*   `assert "Status Counts" in out`: Asserts that the "Status Counts" header is present.
*   `assert "Pass: 25" in out`: Asserts that the "Pass" status count is printed.
*   `assert "Fail: 15" in out`: Asserts that the "Fail" status count is printed.
*   `assert "Blocked: 5" in out`: Asserts that the "Blocked" status count is printed.
*   `assert "Top 2 (Longest Tests):\n" in out`: Asserts that the "Top X" header is present.
*   `assert "1. Requirement: REQ-X, Test Case: TestCaseX, Duration: 60.500 sec, Status: Passed" in out`: Asserts that the first entry is printed in the correct basic format.
*   `assert "2. Requirement: REQ-Y, Test Case: TestCaseY, Duration: 28.500 sec, Status: Failed" in out`: Asserts that the second entry is printed in the correct basic format.

**Postconditions:**

*   The `display_results` method has been tested with formatting disabled.
*   The output generated by `display_results` has been verified to be correctly formatted.

**Test Code:** `test_printer.py::test_display_results_no_formatting`

**Status:** Pass

**Notes:**

*   This test indirectly tests the `do_basic_output` method by calling `display_results` with `formatting=False`.
*   The assertions related to the basic output format are implicitly covered by the assertions in `test_do_basic_output`.
